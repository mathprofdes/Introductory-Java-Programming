import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class GraphicsJPanel extends JPanel implements MouseListener, MouseMotionListener {

	private int prevX, prevY; // The previous location of the mouse.
	private boolean dragging = false;
	private Color drawColor;
	private int drawWidth = 500;
	private int drawHeight = 400;
	
	public GraphicsJPanel() {
		setBackground(Color.white);
		addMouseListener(this);
		addMouseMotionListener(this);
	}

	public void paint(Graphics g) {
		super.paint(g);

		g.setColor(Color.WHITE);
		g.fillRect(0, 0, drawWidth, drawHeight);
		g.setColor(Color.BLACK);
		g.drawRect(0, 0, drawWidth, drawHeight);

		g.setColor(Color.BLACK);
		g.drawRect(0, 0, drawWidth - 50, drawHeight);

		g.setColor(Color.BLACK);
		g.fillRect(drawWidth - 50, 0, 50, 50);
		g.setColor(Color.BLACK);
		g.drawRect(drawWidth - 50, 0, 50, 50);

		g.setColor(Color.RED);
		g.fillRect(drawWidth - 50, 50, 50, 50);
		g.setColor(Color.BLACK);
		g.drawRect(drawWidth - 50, 50, 50, 50);

		g.setColor(Color.GREEN);
		g.fillRect(drawWidth - 50, 100, 50, 50);
		g.setColor(Color.BLACK);
		g.drawRect(drawWidth - 50, 100, 50, 50);

		g.setColor(Color.BLUE);
		g.fillRect(drawWidth - 50, 150, 50, 50);
		g.setColor(Color.BLACK);
		g.drawRect(drawWidth - 50, 150, 50, 50);

		g.setColor(Color.YELLOW);
		g.fillRect(drawWidth - 50, 200, 50, 50);
		g.setColor(Color.BLACK);
		g.drawRect(drawWidth - 50, 200, 50, 50);

		g.setColor(Color.GRAY);
		g.fillRect(drawWidth - 50, 250, 50, 50);
		g.setColor(Color.BLACK);
		g.drawRect(drawWidth - 50, 250, 50, 50);

		g.drawRect(drawWidth - 50, 300, 50, 50);
		g.setFont(new Font(Font.SANS_SERIF, Font.PLAIN, 20));
		g.drawString("Clr", drawWidth - 49, 335);
		
		drawColor = Color.BLACK;
	}

	public void mousePressed(MouseEvent evt) {
		// Only draw if the left mouse button was depressed.
		if (evt.getButton() == MouseEvent.BUTTON1)
			dragging = true;

		prevX = evt.getX(); // x-coordinate where the user clicked.
		prevY = evt.getY(); // y-coordinate where the user clicked.
	}

	public void mouseDragged(MouseEvent evt) {
		if (!dragging)
			return;

		int x = evt.getX(); // x-coordinate of mouse.
		int y = evt.getY(); // y=coordinate of mouse.

		Graphics g = getGraphics();
		g.setColor(drawColor);

		// Make sure that we are in the drawing region and then draw the line.
		if ((x > 0) && (x < drawWidth - 50) && (y > 0) && (y < drawHeight)
				&& (prevX > 0) && (prevX < drawWidth - 50) && (prevY > 0)
				&& (prevY < drawHeight))
			g.drawLine(prevX, prevY, x, y);

		// Get ready for the next line segment in the curve.
		prevX = x;
		prevY = y;
	}

	public void mouseReleased(MouseEvent evt) {
		dragging = false;
	}

	public void mouseClicked(MouseEvent evt) {
		// if right mouse button clicked, clear the screen.
		if (evt.getButton() == MouseEvent.BUTTON3) {
			Graphics g = getGraphics();

			g.setColor(Color.WHITE);
			g.fillRect(0, 0, drawWidth - 50, drawHeight);
			g.setColor(Color.BLACK);
			g.drawRect(0, 0, drawWidth - 50, drawHeight);
		}

		// if left mouse button clicked, change the color.
		if (evt.getButton() == MouseEvent.BUTTON1) {
			int x = evt.getX(); // x-coordinate of mouse.
			int y = evt.getY(); // y-coordinate of mouse.

			if (x > drawWidth - 50 && x < drawWidth) {
				if (y > 0 && y < 50)
					drawColor = Color.BLACK;
				else if (y > 50 && y < 100)
					drawColor = Color.RED;
				else if (y > 100 && y < 150)
					drawColor = Color.GREEN;
				else if (y > 150 && y < 200)
					drawColor = Color.BLUE;
				else if (y > 200 && y < 250)
					drawColor = Color.YELLOW;
				else if (y > 250 && y < 300)
					drawColor = Color.GRAY;
				else if (y > 300 && y < 350) {
					Graphics g = getGraphics();

					g.setColor(Color.WHITE);
					g.fillRect(0, 0, drawWidth - 50, drawHeight);
					g.setColor(Color.BLACK);
					g.drawRect(0, 0, drawWidth - 50, drawHeight);
				}
			}
		}
	}

	// Some empty routines. These are required by the MouseListener
	// and MouseMotionListener interfaces.
	public void mouseEntered(MouseEvent evt) {
	}

	public void mouseExited(MouseEvent evt) {
	}

	public void mouseMoved(MouseEvent evt) {
	}
}
